apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "speedster.fullname" . }}
  labels:
    {{- include "speedster.labels" . | nindent 4 }}
data:
  # OTEL Configuration
  OTEL_EXPORTER_OTLP_ENDPOINT: {{ .Values.otel.endpoint | quote }}
  OTEL_SERVICE_NAME: {{ .Values.otel.serviceName | quote }}
  {{- if .Values.otel.serviceNamespace }}
  OTEL_SERVICE_NAMESPACE: {{ .Values.otel.serviceNamespace | quote }}
  {{- end }}

  # Speedtest Configuration
  {{- if .Values.speedtest.serverId }}
  SPEEDTEST_SERVER_ID: {{ .Values.speedtest.serverId | quote }}
  {{- end }}
  SPEEDTEST_MEASUREMENT_COUNT: {{ .Values.speedtest.measurementCount | quote }}
  SPEEDTEST_MEASUREMENT_STRATEGY: {{ .Values.speedtest.measurementStrategy | quote }}
  SPEEDTEST_TIMEOUT: {{ .Values.speedtest.timeout | quote }}
  SPEEDTEST_CONCURRENT_STREAMS: {{ .Values.speedtest.concurrentStreams | quote }}
  SPEEDTEST_TEST_DURATION: {{ .Values.speedtest.testDuration | quote }}
  SPEEDTEST_SKIP_DOWNLOAD: {{ .Values.speedtest.skipDownload | quote }}
  SPEEDTEST_SKIP_UPLOAD: {{ .Values.speedtest.skipUpload | quote }}

  # Application Configuration
  LOG_LEVEL: {{ .Values.logLevel | quote }}
